<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script src="jquery.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript">
			async function foo(){
				return new Promise(resolve => {
					// setTimeout(function(){
					// 	resolve()
					// },2000)
					setTimeout(resolve,2000)
				})
			}
			
			// async function test(){
			// 	console.log('开始执行',new Date().toTimeString());
			// 	await foo();
			// 	console.log('执行完毕',new Date().toTimeString());
			// } 
			// test()
			
			// function test2(){
			// 	return 'xxx'
			// }
			// async function asyncPrint(){
			// 	let result = await Promise.resolve('promise');
			// 	console.log(result)
			// 	result = await Promise.reject('失败了。。');
			// 	console.log(result)
			// }
			// asyncPrint()
			
			async function getNews(url){
				return new Promise((resolve,reject) =>{
					$.ajax({
						method:'GET',
						url,
						success: data => resolve('http://www.qq.com'),
						error: error => resolve(false)
					})
				})
			}
			
			async function sendXml(){
				let result = await getNews('http://www.baidu1.com');
				if(!result){
					alert("暂时没有新闻推送。。。");
					return;
				}
				console.log(result)
				await getNews(result);
				console.log(result)
			}
			 sendXml()
		</script>
	</body>
</html>
